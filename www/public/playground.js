"use strict";(()=>{var A=class{constructor(t,e,n,r,a){this.indentation=t;this.column=e;this.type=n;this.align=r;this.prev=a;this.insideString=!1;this.stringQuote=null;this.expectedImportName=!1;this.knownImports=new Set}},R=new Set(["as","asm","assert","atomic","break","const","continue","defer","else","enum","fn","for","go","goto","if","import","in","interface","is","isreftype","lock","match","module","mut","none","or","pub","return","rlock","select","shared","sizeof","static","struct","spawn","type","typeof","union","unsafe","volatile","__offsetof"]),I=new Set(["sql","chan","thread"]),H=new Set(["true","false","nil","print","println","exit","panic","error","dump"]),j=new Set(["bool","string","i8","i16","int","i64","i128","u8","u16","u32","u64","u128","rune","f32","f64","isize","usize","voidptr","any"]);CodeMirror.defineMode("v",l=>{var C;let t=(C=l.indentUnit)!=null?C:0,e=/[+\-*&^%:=<>!|\/]/,n=null;function r(i){return i.eatWhile(/[\w$_\xa1-\uffff]/),i.current()}function a(i,o){let s=i.next();if(s===null)return null;if(o.context.insideString&&s==="}")return i.eat("}"),o.tokenize=g(o.context.stringQuote),"end-interpolation";if(s==='"'||s==="'"||s==="`")return o.tokenize=g(s),o.tokenize(i,o);if(/[\d.]/.test(s)){if(s==="."){if(!i.match(/^[0-9]+([eE][\-+]?[0-9]+)?/))return"operator"}else s==="0"?i.match(/^[xX][0-9a-fA-F]+/)||i.match(/^0[0-7]+/):i.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/);return"number"}if(/[\[\]{}(),;:.]/.test(s))return n=s,null;if(s==="/"){if(i.eat("*"))return o.tokenize=b,b(i,o);if(i.eat("/"))return i.skipToEnd(),"comment"}if(e.test(s))return i.eatWhile(e),"operator";if(s==="@")return r(i),"at-identifier";if(s==="$"){let w=r(i).slice(1);return R.has(w)?"keyword":"compile-time-identifier"}let u=r(i);if(u==="import"&&(o.context.expectedImportName=!0),R.has(u)||I.has(u))return"keyword";if(H.has(u))return"atom";if(j.has(u))return"builtin";if(u[0].toUpperCase()===u[0])return"type";let m=i.peek();if(m==="("||m==="<")return"function";if(m==="["){i.next();let w=i.next();if(i.backUp(2),w!=null&&w.match(/[A-Z]/i))return"function"}return o.context.expectedImportName&&i.peek()!="."?(o.context.expectedImportName=!1,o.context.knownImports===void 0&&(o.context.knownImports=new Set),o.context.knownImports.add(u),"import-name"):o.context.knownImports.has(u)&&i.peek()=="."?"import-name":"variable"}function d(i,o){return i.match("}")?(o.tokenize=g(o.context.stringQuote),"end-interpolation"):(o.tokenize=a,o.tokenize(i,o))}function c(i,o){let s=i.next();if(s===" ")return o.tokenize=g(o.context.stringQuote),o.tokenize(i,o);if(s===".")return"operator";let u=r(i);if(u[0].toLowerCase()===u[0].toUpperCase())return o.tokenize=g(o.context.stringQuote),o.tokenize(i,o);let m=i.next();return i.backUp(1),m==="."?o.tokenize=c:o.tokenize=g(o.context.stringQuote),"variable"}function p(i,o){let s=i.next();return s==="$"&&i.eat("{")?(o.tokenize=d,"start-interpolation"):s==="$"?(o.tokenize=c,"start-interpolation"):"string"}function g(i){return function(o,s){s.context.insideString=!0,s.context.stringQuote=i;let u="",m=!1,w=!1;for(;(u=o.next())!=null;){if(u===i&&!m){w=!0;break}if(u==="$"&&!m&&o.eat("{"))return s.tokenize=p,o.backUp(2),"string";if(u==="$"&&!m)return s.tokenize=p,o.backUp(1),"string";m=!m&&u==="\\"}return(w||m)&&(s.tokenize=a),s.context.insideString=!1,s.context.stringQuote=null,"string"}}function b(i,o){let s=!1,u;for(;u=i.next();){if(u==="/"&&s){o.tokenize=a;break}s=u==="*"}return"comment"}function y(i,o,s){return i.context=new A(i.indention,o,s,null,i.context)}function f(i){if(!i.context.prev)return;let o=i.context.type;return(o===")"||o==="]"||o==="}")&&(i.indention=i.context.indentation),i.context=i.context.prev,i.context}return{startState:function(){return{tokenize:null,context:new A(0,0,"top",!1),indention:0,startOfLine:!0}},token:function(i,o){let s=o.context;if(i.sol()&&(s.align==null&&(s.align=!1),o.indention=i.indentation(),o.startOfLine=!0),i.eatSpace())return null;n=null;let u=(o.tokenize||a)(i,o);return u==="comment"||(s.align==null&&(s.align=!0),n==="{"?y(o,i.column(),"}"):n==="["?y(o,i.column(),"]"):n==="("?y(o,i.column(),")"):(n==="}"&&s.type==="}"||n===s.type)&&f(o),o.startOfLine=!1),u},indent:function(i,o){if(i.tokenize!==a&&i.tokenize!=null||i.context.type=="top")return 0;let s=i.context,m=o.charAt(0)===s.type;return s.align?s.column+(m?0:1):s.indentation+(m?0:t)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME("text/x-v","v");var N=CodeMirror.Pos,V=["arrays","benchmark","bitfield","cli","clipboard","compress","context","crypto","darwin","datatypes","dl","dlmalloc","encoding","eventbus","flag","fontstash","gg","gx","hash","io","js","json","log","math","mssql","mysql","net","orm","os","pg","picoev","picohttpparser","rand","readline","regex","runtime","semver","sokol","sqlite","stbi","strconv","strings","sync","szip","term","time","toml","v","vweb","x"];function $(l){var p;let t=[],e=l.getCursor(),n=l.getTokenAt(e),r=new Set;for(let g=0;g<Math.min(l.lineCount(),10);g++){let b=l.getLineTokens(g).filter(y=>y.type!=null);b.length>0&&b[0].string==="import"&&r.add(b[b.length-1].string)}let a=l.getLineTokens(e.line);a.length>0&&a[0].string==="import"&&t.push(a[0]);let d=n.string.length,c=l.getTokenAt(N(e.line,e.ch-d));return n.string==="."&&t.push(n),c.string==="."&&t.push(c),/\b(?:string|comment)\b/.test((p=n.type)!=null?p:"")?null:(/^[\w$_]*$/.test(n.string)?n.end>e.ch&&(n.end=e.ch,n.string=n.string.slice(0,e.ch-n.start)):n={start:e.ch,end:e.ch,string:"",state:n.state,type:n.string==="."?"property":null},{list:Q(n,r,t),from:N(e.line,n.start),to:N(e.line,n.end)})}function Q(l,t,e){let n=[],r=l.string;function a(d){let c=d.text;if(c.indexOf(r)===-1)return;n.find(g=>g.text===c)||n.push(d)}if(e&&e.length){let d=e.pop();if(d!==void 0){if(d.type==="keyword"&&d.string==="import")return V.forEach(c=>{a({text:c,displayText:c,className:"completion-module"})}),n;if(d.string===".")return[]}}return t.forEach(d=>{a({text:d,displayText:d,className:"completion-module"})}),R.forEach(d=>{a({text:d+" ",displayText:d,className:"completion-keyword"})}),I.forEach(d=>{a({text:d+" ",displayText:d,className:"completion-keyword"})}),H.forEach(d=>{a({text:d,displayText:d,className:"completion-atom"})}),j.forEach(d=>{a({text:d,displayText:d,className:"completion-type"})}),n}var K=l=>$(l);CodeMirror.registerHelper("hint","v",K);var L=class{saveCode(t){window.localStorage.setItem(L.LOCAL_STORAGE_KEY,t)}getCode(t){let e=window.localStorage.getItem(L.LOCAL_STORAGE_KEY);if(e==null){t(L.WELCOME_CODE);return}t(e)}},T=L;T.LOCAL_STORAGE_KEY="code",T.WELCOME_CODE=`
// Welcome to the V Playground!
// Here you can edit, run, and share V code.
// Let's start with a simple "Hello, Playground!" example:
println('Hello, Playground!')

// To run the code, click the "Run" button or just press Ctrl + R.
// To format the code, click the "Format" button or just press Ctrl + L.
// See all shortcuts in the "Help" in the bottom right corner.

// More examples are available in right dropdown list.
// You can find Help for shortcuts in the bottom right corner or just press Ctrl + I.
// See also change theme button in the top right corner. 
// If you want to learn more about V, visit https://vlang.io
// Join us on Discord: https://discord.gg/vlang
// Enjoy!
`.trimStart();var v=class{constructor(t){this.hash=t}saveCode(t){}getCode(t){return this.getSharedCode(t)}getSharedCode(t){let e=new FormData;e.append("hash",this.hash),fetch("/query",{method:"post",body:e}).then(n=>n.text()).then(n=>{t(n)}).catch(n=>{console.log(n)})}};v.QUERY_PARAM_NAME="query",v.CODE_NOT_FOUND="Not found.";var F=class{constructor(t){this.text=t}saveCode(t){}getCode(t){t(this.text)}};var O=class{constructor(t){this.onClose=null;this.onWrite=null;this.filters=[];this.element=t}registerCloseHandler(t){this.onClose=t}registerWriteHandler(t){this.onWrite=t}registerFilter(t){this.filters.push(t)}write(t){let e=t.split(`
`),n=this.getTerminalOutputElement(),a=e.filter(d=>this.filters.every(c=>c(d))).join(`
`);n.innerHTML+=a+`
`,this.onWrite!==null&&this.onWrite(t)}writeTestPassed(){let t=`
<span class="test-passed-line">
    <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="8.50006" cy="8.5" r="6.70953" stroke="#38a13b"/>
        <path d="M5.06188 8.93582L8.00653 10.9566L11.4065 5.35109" stroke="#38a13b"/>
    </svg>

    <span>Tests passed</span>
</span>
`,e=this.getTerminalOutputElement();e.innerHTML+=t+`
`,this.onWrite!==null&&this.onWrite("")}writeTestFailed(){let t=`
<span class="test-failed-line">
    <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="8.50006" cy="8.5" r="6.70953" stroke="#AF5050"/>
        <path d="M9.05936 4.27274L8.97413 10.5455H7.9855L7.90027 4.27274H9.05936ZM8.47981 13.0682C8.26959 13.0682 8.08919 12.9929 7.93862 12.8423C7.78805 12.6918 7.71277 12.5114 7.71277 12.3011C7.71277 12.0909 7.78805 11.9105 7.93862 11.76C8.08919 11.6094 8.26959 11.5341 8.47981 11.5341C8.69004 11.5341 8.87044 11.6094 9.02101 11.76C9.17158 11.9105 9.24686 12.0909 9.24686 12.3011C9.24686 12.4403 9.21135 12.5682 9.14033 12.6847C9.07214 12.8011 8.97981 12.8949 8.86334 12.9659C8.7497 13.0341 8.62186 13.0682 8.47981 13.0682Z" fill="#AF5050"/>
    </svg>

    <span>Tests failed</span>
</span>
`,e=this.getTerminalOutputElement();e.innerHTML+=t+`
`,this.onWrite!==null&&this.onWrite("")}clear(){this.getTerminalOutputElement().innerHTML=""}mount(){let t=this.element.querySelector(".js-terminal__close-buttom");t==null||this.onClose===null||t.addEventListener("click",this.onClose)}getTerminalOutputElement(){return this.element.querySelector(".js-terminal__output")}};var _=class{constructor(t){this.removedIndent=0;this.state=0;this.wasUnfolded=!1;this.foldedCode=null;this.unfoldedCode=null;this.currentCodeObtainer=()=>"";let e=this.normalizeCode(t);this.range=this.getSnippetRange(e),this.code=this.removeRangeMarkers(e)}registerCurrentCodeObtainer(t){this.currentCodeObtainer=t}noFolding(){return this.range.start==-1}getCode(){return this.noFolding()?this.code:this.state==1?this.getUnfoldedCode():this.getFoldedCode()}getRunnableCode(){return this.state==1?this.currentCodeObtainer():this.getUnfoldedCodeWithoutCaching()}getUnfoldedCode(){return this.unfoldedCode!=null?this.unfoldedCode:this.getUnfoldedCodeWithoutCaching()}getUnfoldedCodeWithoutCaching(){if(this.noFolding())return this.currentCodeObtainer();let t=this.currentCodeObtainer(),e=" ".repeat(this.removedIndent),n=t.split(`
`).map(p=>e+p).join(`
`),r=this.code.split(`
`),a=r.slice(0,this.range.start).join(`
`),d=r.slice(r.length-this.range.startFromEnd).join(`
`),c=a+`
`+n+`
`+d;return this.unfoldedCode=c,c}getFoldedCode(){if(this.noFolding())return this.currentCodeObtainer();if(this.foldedCode!=null)return this.foldedCode;this.wasUnfolded&&(this.code=this.currentCodeObtainer());let t=this.code.split(`
`),e=t.slice(this.range.start,t.length-this.range.startFromEnd).join(`
`),n=this.normalizeIndents(e);return this.foldedCode=n,n}toggle(){this.state==0?(this.state=1,this.wasUnfolded=!0,this.foldedCode=null):(this.state=0,this.unfoldedCode=null)}getSnippetRange(t){let e=t.split(`
`),n=e.findIndex(a=>a.trim().startsWith("//code::start")),r=e.findIndex(a=>a.trim().startsWith("//code::end"));return n==-1||r==-1?{start:-1,startFromEnd:0}:{start:n,startFromEnd:e.length-r-1}}normalizeCode(t){let e=this.normalizeIndents(t).split(`
`);if(e.length>1){let n=e[0],r=e[e.length-1];n.trim().length==0&&e.shift(),r.trim().length==0&&e.pop()}return e.join(`
`)}normalizeIndents(t){let e=t.split(`
`),n=e.map(d=>this.lineIndent(d)),r=Math.min(...n),a=e.map(d=>d.substring(r));return this.removedIndent=r,a.join(`
`)}lineIndent(t){for(let e=0;e<t.length;e++)if(t[e]!==" "&&t[e]!="	")return t.substring(0,e).replaceAll("	","    ").length;return Number.MAX_VALUE}removeRangeMarkers(t){return t.split(`
`).filter(r=>!r.trim().startsWith("//code::")).join(`
`)}};var z=class{constructor(t,e,n,r){this.snippet=null;let a={mode:"v",lineNumbers:r,matchBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment"},indentWithTabs:!0,indentUnit:4,autoCloseBrackets:!0,showHint:!0,lint:{async:!0,lintOnChange:!0,delay:20},toggleLineComment:{indent:!0,padding:" "},theme:"dark",readOnly:n?"nocursor":!1};this.wrapperElement=t;let d=t.querySelector("textarea");this.editor=CodeMirror.fromTextArea(d,a),this.repository=e,this.repository.getCode(p=>{if(p===v.CODE_NOT_FOUND){this.terminal.write("Code for shared link not found.");return}this.snippet=new _(p),this.snippet.registerCurrentCodeObtainer(()=>this.editor.getValue()),this.setCode(this.snippet.getCode())});let c=t.querySelector(".js-terminal");if(c==null)throw new Error("Terminal not found, please check that terminal inside editor element");this.terminal=new O(c),this.terminal.registerCloseHandler(()=>{this.closeTerminal(),this.editor.refresh()}),this.terminal.registerWriteHandler(p=>{this.openTerminal()}),this.terminal.registerFilter(p=>!p.trim().startsWith("Failed command")),this.terminal.mount(),this.closeTerminal()}setEditorFontSize(t){let e=this.wrapperElement.querySelector(".CodeMirror"),n=t;n.endsWith("px")&&(n=n.slice(0,-2)),e.style.fontSize=n+"px",this.refresh()}setCode(t,e=!1){let n=this.editor.getCursor();this.editor.setValue(t),this.repository.saveCode(t),e&&this.editor.setCursor(n)}getCode(){var t;return(t=this.snippet)==null?void 0:t.getCode()}saveCode(){this.repository instanceof v&&(this.repository=new T),this.repository.saveCode(this.getCode())}toggleSnippet(){if(this.snippet!==null){if(this.snippet.toggle(),this.setCode(this.snippet.getCode()),this.snippet.state==1){let e=this.snippet.getCode().split(`
`).length,n=this.snippet.range.start,r=e-this.snippet.range.startFromEnd;this.editor.markText({line:0,ch:0},{line:n,ch:0},{readOnly:!0,inclusiveLeft:!0,inclusiveRight:!1}),this.editor.markText({line:r,ch:0},{line:e,ch:0},{readOnly:!0,inclusiveLeft:!0,inclusiveRight:!1}),this.editor.operation(()=>{for(let a=0;a<n;a++)this.editor.addLineClass(a,"background","unmodifiable-line");for(let a=r;a<e;a++)this.editor.addLineClass(a,"background","unmodifiable-line")})}this.refresh()}}openTerminal(){this.wrapperElement.classList.remove("closed-terminal")}closeTerminal(){this.wrapperElement.classList.add("closed-terminal")}setTheme(t){this.editor.setOption("theme",t.name())}showCompletion(){this.editor.execCommand("autocomplete")}refresh(){this.editor.refresh()}};var k=class{static runCode(t){let e=new FormData;e.append("code",t);let n=this.buildUrl("run");return fetch(n,{method:"post",body:e}).then(r=>{if(r.status!=200)throw new Error("Can't run code");return r}).then(r=>r.json()).then(r=>JSON.parse(r))}static runTest(t){let e=new FormData;e.append("code",t);let n=this.buildUrl("run_test");return fetch(n,{method:"post",body:e}).then(r=>{if(r.status!=200)throw new Error("Can't run test");return r}).then(r=>r.json()).then(r=>JSON.parse(r))}static buildUrl(t){return this.server!==null&&this.server!==void 0?`${this.server.endsWith("/")?this.server.slice(0,-1):this.server}/${t}`:`/${t}`}};var B=`
<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="8.5" y1="2" x2="8.5" y2="15" stroke="black"/>
    <line x1="15" y1="8.5" x2="2" y2="8.5" stroke="black"/>
</svg>
`,W=`
<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="3.90385" y1="3.9038" x2="13.0962" y2="13.0962" stroke="black"/>
    <line x1="13.0962" y1="3.90382" x2="3.90384" y2="13.0962" stroke="black"/>
</svg>
`,q=`<div class="js-playground v-playground">
  <div class="playground__wrapper">
    <div class="playground__editor">
      <div class="js-playground__action-show-all show-all-button">
          <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <line x1="8.5" y1="2" x2="8.5" y2="15" stroke="black"/>
              <line x1="15" y1="8.5" x2="2" y2="8.5" stroke="black"/>
          </svg>
      </div>
      <div class="js-playground__action-run run-style-button">
        <div class="icon">
          <svg class="run-icon" width="15" height="15" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_14_12)">
              <path d="M14.0548 8.75068L3.25542 14.9857C2.92209 15.1782 2.50542 14.9376 2.50542 14.5527L2.50542 2.08263C2.50542 1.69774 2.92208 1.45717 3.25542 1.64962L14.0548 7.88465C14.3881 8.0771 14.3881 8.55823 14.0548 8.75068Z"
                    fill="#659360" fill-opacity="0.2" stroke="#659360"/>
            </g>
            <defs>
              <clipPath id="clip0_14_12">
                <rect width="16" height="16" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>
      
      <!-- Place for CodeMirror editor -->
      <textarea></textarea>
    </div>
    
    <div class="js-terminal playground__terminal">
      <div class="header">
        <button class="js-terminal__close-buttom terminal__close-button">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect class="close-terminal-button-rect" x="1" y="8" width="13" height="1"/>
          </svg>
        </button>
      </div>
      <pre class="js-terminal__output terminal__output"></pre>
    </div>
  </div>
  
  <div class="js-playground__footer playground__footer">
    <span class="js-playground-link playground-link">Playground \u2192</span>
  </div>
</div>
`;var E=class{name(){return"dark"}};var M=class{name(){return"light"}};var S=class{constructor(t=null){this.currentTheme=null;this.onChange=[];this.changeThemeButton=null;this.predefinedTheme=null;this.predefinedTheme=t,this.changeThemeButton=document.querySelector(".js-playground__action-change-theme")}registerOnChange(t){this.onChange.push(t)}loadTheme(){if(this.predefinedTheme!==null&&this.predefinedTheme!==void 0){this.turnTheme(this.predefinedTheme);return}this.turnTheme(new E)}turnTheme(t){this.currentTheme=t,this.onChange.forEach(e=>e(t))}turnDarkTheme(){this.turnTheme(new E)}turnLightTheme(){this.turnTheme(new M)}toggleTheme(){this.currentTheme&&(this.currentTheme.name()==="light"?this.turnDarkTheme():this.turnLightTheme())}static findTheme(t){let n=this.themes.filter(r=>r.name()===t)[0];if(n===void 0)throw new Error(`Theme ${t} not found`);return n}};S.themes=[new E,new M];var x=class{constructor(t){this.onSuccessfulRun=[];this.onFailedRun=[];var d,c,p,g,b,y;if(t.selector)this.playgroundElement=document.querySelector(t.selector);else if(t.element)this.playgroundElement=t.element;else throw new Error("No selector or element provided");let e=(c=(d=t.code)!=null?d:this.playgroundElement.textContent)!=null?c:"";this.mount(this.playgroundElement);let n=(p=this.playgroundElement.getAttribute("data-theme"))!=null?p:"dark";this.runAsTests=t.configuration==="tests",this.repository=new F(e);let r=this.playgroundElement.querySelector(".v-playground");if(this.editor=new z(r,this.repository,(g=t.highlightOnly)!=null?g:!1,(b=t.showLineNumbers)!=null?b:!0),t.fontSize&&this.editor.setEditorFontSize(t.fontSize),this.themeManager=new S(S.findTheme(n)),this.themeManager.registerOnChange(f=>{this.editor.setTheme(f),r==null||r.setAttribute("data-theme",f.name())}),this.themeManager.loadTheme(),this.registerRunAction(t.customRunButton,()=>{this.run()}),this.registerAction("show-all",()=>{var C;this.editor.toggleSnippet();let f=this.getActionElement("show-all");((C=this.editor.snippet)==null?void 0:C.state)===0?f.innerHTML=B:f.innerHTML=W}),this.setupPlaygroundLink(),t.showFoldedCodeButton===!1||(y=this.editor.snippet)!=null&&y.noFolding()){let f=this.getActionElement("show-all");f.style.display="none"}let a=this.playgroundElement.querySelector(".js-playground__footer");if(t.showFooter===!1&&(a.style.display="none",r.classList.add("no-footer")),t.highlightOnly===!0){let f=this.getActionElement("run");f.style.display="none",a.style.display="none"}t.server!==void 0&&(k.server=t.server)}setupPlaygroundLink(){this.playgroundElement.querySelector(".js-playground-link").addEventListener("click",()=>{var d;let e="https://play.vlang.foundation/?base64=",n=(d=this.editor.snippet)==null?void 0:d.getRunnableCode(),r=btoa(n),a=e+r;window.open(a,"_blank")})}static create(t,e){var y,f,C,i,o,s;let n=(y=t==null?void 0:t.getAttribute("data-configuration"))!=null?y:"run",r=(f=t.getAttribute("data-font-size"))!=null?f:"12px",a=(C=t==null?void 0:t.getAttribute("data-show-line-numbers"))!=null?C:"true",d=(i=t.getAttribute("data-highlight-only"))!=null?i:"false",c=(o=t==null?void 0:t.getAttribute("data-show-folded-code-button"))!=null?o:"true",p=(s=t==null?void 0:t.getAttribute("data-show-footer"))!=null?s:"true",g=t==null?void 0:t.getAttribute("data-custom-run-button"),b=t==null?void 0:t.getAttribute("data-server");return new x({element:t,code:e,configuration:n,fontSize:r,showLineNumbers:a==="true",highlightOnly:d==="true",showFoldedCodeButton:c==="true",showFooter:p==="true",customRunButton:g!=null?g:void 0,server:b!=null?b:"https://play.vlang.foundation/"})}registerOnSuccessfulRun(t){this.onSuccessfulRun.push(t)}registerOnFailedRun(t){this.onFailedRun.push(t)}registerRunAction(t,e){if(t){let n=document.querySelector(t);if(n===void 0)throw new Error(`Can't find custom button with selector ${t}`);n.addEventListener("click",e);let r=this.getActionElement("run");r.style.display="none";return}this.registerAction("run",e)}mount(t){t!==null&&(t.innerHTML=q)}registerAction(t,e){let n=this.playgroundElement.querySelector(`.js-playground__action-${t}`);if(n===void 0)throw new Error(`Can't find action button with class js-playground__action-${t}`);n.addEventListener("click",e)}getActionElement(t){return this.playgroundElement.querySelector(`.js-playground__action-${t}`)}run(){if(this.runAsTests){this.runTests();return}this.runCode()}runCode(){var e;this.clearTerminal(),this.writeToTerminal("Running code...");let t=(e=this.editor.snippet)==null?void 0:e.getRunnableCode();k.runCode(t).then(n=>{this.clearTerminal(),this.writeToTerminal(n.output),this.onRunFinished(n)}).catch(n=>{console.log(n),this.writeToTerminal("Can't run code. Please try again."),this.onFailedRun.forEach(r=>r())})}runTests(){var e;this.clearTerminal(),this.writeToTerminal("Running tests...");let t=(e=this.editor.snippet)==null?void 0:e.getRunnableCode();k.runTest(t).then(n=>{if(this.clearTerminal(),n.ok)this.editor.terminal.writeTestPassed();else{this.editor.terminal.writeTestFailed();let r=n.output.split(`
`).slice(2,-6).join(`
`);this.writeToTerminal(r)}this.onRunFinished(n)}).catch(n=>{console.log(n),this.writeToTerminal("Can't run tests. Please try again."),this.onFailedRun.forEach(r=>r())})}onRunFinished(t){t.ok?this.onSuccessfulRun.forEach(e=>e()):this.onFailedRun.forEach(e=>e())}setupShortcuts(){this.editor.editor.on("keypress",(t,e)=>{!t.state.completionActive&&e.key.length===1&&e.key.match(/[a-z0-9]/i)&&this.editor.showCompletion()}),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"?(this.editor.saveCode(),t.preventDefault()):this.editor.saveCode()})}clearTerminal(){this.editor.terminal.clear()}writeToTerminal(t){this.editor.terminal.write(t)}setEditorFontSize(t){this.editor.setEditorFontSize(t)}};var h=document.currentScript,D=h==null?void 0:h.getAttribute("data-selector"),Z=h==null?void 0:h.getAttribute("data-configuration"),G=h==null?void 0:h.getAttribute("data-font-size"),J=h==null?void 0:h.getAttribute("data-show-line-numbers"),X=h==null?void 0:h.getAttribute("data-highlight-only"),tt=h==null?void 0:h.getAttribute("data-show-folded-code-button"),et=h==null?void 0:h.getAttribute("data-show-footer"),nt=h==null?void 0:h.getAttribute("data-server");D&&window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(D).forEach(l=>{var g,b,y,f,C,i,o,s,u,m,w,U,P;let t=(b=(g=l==null?void 0:l.getAttribute("data-configuration"))!=null?g:Z)!=null?b:"run",e=(f=(y=l.getAttribute("data-font-size"))!=null?y:G)!=null?f:"12px",n=(i=(C=l==null?void 0:l.getAttribute("data-show-line-numbers"))!=null?C:J)!=null?i:"true",r=(s=(o=l.getAttribute("data-highlight-only"))!=null?o:X)!=null?s:"false",a=(m=(u=l==null?void 0:l.getAttribute("data-show-folded-code-button"))!=null?u:tt)!=null?m:"true",d=(U=(w=l==null?void 0:l.getAttribute("data-show-footer"))!=null?w:et)!=null?U:"true",c=l==null?void 0:l.getAttribute("data-custom-run-button"),p=(P=l==null?void 0:l.getAttribute("data-server"))!=null?P:nt;new x({element:l,configuration:t,fontSize:e,showLineNumbers:n==="true",highlightOnly:r==="true",showFoldedCodeButton:a==="true",showFooter:d==="true",customRunButton:c!=null?c:void 0,server:p!=null?p:"https://play.vlang.foundation/"})})});it();window.Playground=x;function it(){let l=document.head,t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="https://unpkg.com/vlang-playground@1.0.20/dist/vlang-playground.css",l.appendChild(t)}})();
//# sourceMappingURL=playground.js.map
